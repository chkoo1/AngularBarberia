<div class="container">
  <h1>Productos</h1>
  <br />
  <form
    class="row g-3 needs-validation"
    method="POST"
    novalidate
    enctype="multipart/form-data"
  >
  <!-- ! ID -->
            <div class="col-md-4" [hidden]="true">
                <label for="id" class="form-label">ID</label>
                <input type="text" class="form-control" id="id"
                    maxlength="25" minlength="3" name="id" [(ngModel)]="producto.id"
                    onkeypress="return check(event)" required>
                <div class="invalid-feedback">
                    Ingresa un nombre correcto
                </div>
            </div>

    <div class="col-md-6">
      <label for="nombre" class="form-label">Nombre</label>
      <input
        type="text"
        class="form-control"
        id="nombre"
        maxlength="50"
        minlength="1"
        required
        name="name"
        [(ngModel)]="producto.name"
      />
      <div class="invalid-feedback">Ingresa un producto correcto</div>
    </div>

    <div class="col-md-6">
      <label for="quantity" class="form-label">Cantidad</label>
      <div class="input-group has-validation">
        <input
          name="quantity"
          type="number"
          class="form-control"
          id="quantity"
          min="0"
          required
          [(ngModel)]="producto.quantity"
        />
        <div class="invalid-feedback">Ingresa una cantidad valida</div>
      </div>
    </div>

    <div class="col-md-12">
      <label for="price" class="form-label">Precio</label>
      <div class="input-group has-validation">
        <span class="input-group-text" id="inputGroupPrepend">$</span>
        <input
          name="price"
          type="number"
          class="form-control"
          id="price"
          min="0"
          required
          [(ngModel)]="producto.price"
        />
        <div class="invalid-feedback">Ingresa un precio valido</div>
      </div>
    </div>

    <div class="input-group col-mb-3">
      <input
        name="image1"
        type="file"
        class="form-control"
        id="inputGroupFile02"
        required
        accept="image/*"
        (change)="fotoseleccionada1($event)"
      />
      <label class="input-group-text" for="image1">Subir</label>
      <div class="invalid-feedback">Selecciona una imagen</div>
    </div>

    <div class="input-group col-mb-3">
      <input
        name="image2"
        type="file"
        class="form-control"
        id="inputGroupFile02"
        required
        accept="image/*"
        (change)="fotoseleccionada2($event)"
      />
      <label class="input-group-text" for="image2">Subir</label>
      <div class="invalid-feedback">Selecciona una imagen</div>
    </div>

    <div class="input-group col-mb-3">
      <input
        name="image3"
        type="file"
        class="form-control"
        id="inputGroupFile02"
        required
        accept="image/*"
        (change)="fotoseleccionada3($event)"
      />
      <label class="input-group-text" for="image3">Subir</label>
      <div class="invalid-feedback">Selecciona una imagen</div>
    </div>

    <div class="col-12">
      @switch (action) {
        @case ("agregar") {
          <button class="btn btn-primary" type="submit" (click)="guardar()">Guardar</button>
        }
        @case ("modificar") {
          <button class="btn btn-primary" type="submit" (click)="actionModificar(producto.id)">Modificar</button>
        }
      }
    </div>
  </form>

<br>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Nombre</th>
        <th scope="col">Cantidad</th>
        <th scope="col">Precio</th>

        <th scope="col">Imagen 1</th>
        <th scope="col">Imagen 2</th>
        <th scope="col">Imagen 3</th>
        <th scope="col">Editar</th>
        <th scope="col">Borrar</th>
      </tr>
    </thead>
    <tbody>
      @for(p of productos.product_services; track p.id){
        <tr>
          <th scope="row">{{p.id}}</th>
          <td>{{p.name}}</td>
          <td>{{p.quantity}}</td>
          <td>{{p.price}}</td>
          <td><img src="{{p.image1}}" alt="" width="100px"/></td>
          <td><img src="{{p.image2}}" alt="" width="100px"/></td>
          <td><img src="{{p.image3}}" alt="" width="100px"/></td>
          <td><a class="btn btn-primary" (click)="modificar(p.id, p.name, p.quantity, p.price)">Editar</a></td>
          <td><a class="btn btn-primary" (click)="actionEliminar(p.id)">Borrar</a></td>
        </tr>
      }
    </tbody>
  </table>
</div>
